---
sidebar: sidebar 
permalink: task_dc_na_7mode.html 
keywords: data collector, 7-mode, NetApp 
summary: NetApp 7모드 데이터 수집기 ​​구성. 
---
= 7-Mode 데이터 수집기에서 작동하는 NetApp Data ONTAP
:hardbreaks:
:allow-uri-read: 


[role="lead"]
7-Mode로 작동하는 Data ONTAP 소프트웨어를 사용하는 스토리지 시스템의 경우, CLI를 사용하여 용량 및 성능 데이터를 얻는 7-Mode 데이터 수집기를 사용합니다.



== 술어

Data Infrastructure Insights NetApp 7모드 데이터 수집기에서 다음과 같은 인벤토리 정보를 수집합니다.  인수한 각 자산 유형에 대해 해당 자산에 사용되는 가장 일반적인 용어가 표시됩니다.  이 데이터 수집기를 보거나 문제를 해결할 때 다음 용어를 염두에 두십시오.


NOTE: 이 데이터 수집기는link:task_getting_started_with_cloud_insights.html#useful-definitions["더 이상 사용되지 않음"] .

[cols="2*"]
|===
| 공급업체/모델 용어 | Data Infrastructure Insights 용어 


| 디스크 | 디스크 


| 레이드 그룹 | 디스크 그룹 


| 파일러 | 스토리지 


| 파일러 | 저장 노드 


| 골재 | 스토리지 풀 


| LUN | 용량 


| 용량 | 내부 볼륨 
|===
참고: 이는 일반적인 용어 매핑일 뿐이며 이 데이터 수집기의 모든 사례를 나타내지 않을 수 있습니다.



== 요구 사항

이 데이터 수집기를 구성하고 사용하려면 다음이 필요합니다.

* FAS 스토리지 컨트롤러와 파트너의 IP 주소입니다.
* 포트 443
* 7-Mode의 다음 역할 기능을 갖춘 컨트롤러 및 파트너 컨트롤러에 대한 사용자 지정 관리자 수준 사용자 이름과 비밀번호:
+
** "api-*": 이를 사용하면 OnCommand Insight 모든 NetApp 스토리지 API 명령을 실행할 수 있습니다.
** "login-http-admin": OnCommand Insight HTTP를 통해 NetApp 스토리지에 연결할 수 있도록 허용합니다.
** "security-api-vfiler": OnCommand Insight 가 NetApp 스토리지 API 명령을 실행하여 vFiler 단위 정보를 검색하도록 허용합니다.
** "cli-options": 이를 사용하여 스토리지 시스템 옵션을 읽습니다.
** "cli-lun": LUN을 관리하기 위한 명령에 액세스합니다.  지정된 LUN 또는 LUN 클래스의 상태(LUN 경로, 크기, 온라인/오프라인 상태, 공유 상태)를 표시합니다.
** "cli-df": 이것을 사용하면 여유 디스크 공간을 표시할 수 있습니다.
** "cli-ifconfig": 인터페이스와 IP 주소를 표시하는 데 사용합니다.






== 구성

[cols="2*"]
|===
| 필드 | 설명 


| 저장 시스템 주소 | NetApp 스토리지 시스템에 대한 IP 주소 또는 정규화된 도메인 이름 


| 사용자 이름 | NetApp 스토리지 시스템의 사용자 이름 


| 비밀번호 | NetApp 스토리지 시스템의 비밀번호 


| 클러스터 내 HA 파트너 주소 | HA 파트너의 IP 주소 또는 정규화된 도메인 이름 


| 클러스터의 HA 파트너 사용자 이름 | HA 파트너의 사용자 이름 


| 클러스터의 HA 파트너 파일러 비밀번호 | HA 파트너의 비밀번호 
|===


== 고급 구성

[cols="2*"]
|===
| 필드 | 설명 


| 재고 폴링 간격(분) | 재고 조사 간격. 기본값은 20분입니다. 


| 연결 유형 | HTTPS 또는 HTTP도 기본 포트를 표시합니다. 


| 연결 포트 재정의 | 비어 있는 경우 연결 유형 필드에서 기본 포트를 사용하고, 그렇지 않은 경우 사용할 연결 포트를 입력합니다. 


| 성능 폴링 간격(초) | 성과 여론조사 간격. 기본값은 300초입니다. 
|===


== 저장 시스템 연결

이 데이터 수집기에 기본 관리자 사용자를 사용하는 대신, NetApp 스토리지 시스템에서 직접 관리자 권한이 있는 사용자를 구성하여 이 데이터 수집기가 NetApp 스토리지 시스템에서 데이터를 수집할 수 있도록 할 수 있습니다.

NetApp 스토리지 시스템에 연결하려면 스토리지 시스템이 있는 기본 pfiler를 획득할 때 지정된 사용자가 다음 조건을 충족해야 합니다.

* 사용자는 vfiler0(루트 파일러/pfiler)에 있어야 합니다.
+
메인 파일러를 획득하면 저장 시스템도 획득됩니다.

* 다음 명령은 사용자 역할 기능을 정의합니다.
+
** "api-*": 이를 사용하면 Data Infrastructure Insights 모든 NetApp 스토리지 API 명령을 실행할 수 있습니다.
+
ZAPI를 사용하려면 이 명령이 필요합니다.

** "login-http-admin": 이를 사용하면 Data Infrastructure Insights HTTP를 통해 NetApp 스토리지에 연결할 수 있습니다.  ZAPI를 사용하려면 이 명령이 필요합니다.
** "security-api-vfiler": 이를 사용하면 Data Infrastructure Insights NetApp 스토리지 API 명령을 실행하여 vFiler 단위 정보를 검색할 수 있습니다.
** "cli-options": "options" 명령에 사용되며 파트너 IP 및 활성화된 라이선스에 사용됩니다.
** "cli-lun": LUN을 관리하기 위한 명령입니다.  지정된 LUN 또는 LUN 클래스의 상태(LUN 경로, 크기, 온라인/오프라인 상태, 공유 상태)를 표시합니다.
** "cli-df": "df -s", "df -r", "df -A -r" 명령에 사용되며 여유 공간을 표시하는 데 사용됩니다.
** "cli-ifconfig": "ifconfig -a" 명령에 사용되며 필터 IP 주소를 가져오는 데 사용됩니다.
** "cli-rdfile": "rdfile /etc/netgroup" 명령에 사용되며 넷그룹을 가져오는 데 사용됩니다.
** "cli-date": "date" 명령에 사용되며 스냅샷 복사본을 얻기 위해 전체 날짜를 가져오는 데 사용됩니다.
** "cli-snap": "스냅 목록" 명령이며 스냅샷 복사본을 얻는 데 사용됩니다.




cli-date 또는 cli-snap 권한이 제공되지 않으면 인수는 완료되지만 스냅샷 사본은 보고되지 않습니다.

7-모드 데이터 소스를 성공적으로 획득하고 스토리지 시스템에 경고를 생성하지 않으려면 다음 명령 문자열 중 하나를 사용하여 사용자 역할을 정의해야 합니다.  여기에 나열된 두 번째 문자열은 첫 번째 문자열의 간소화된 버전입니다.

* 로그인-http-admin, api-*, 보안-api-vfile, cli-rdfile, cli-옵션, cli-df, cli-lun, cli-ifconfig, cli-date, cli-snap, _
* 로그인-http-admin,api-*,보안-api-vfile,cli-




== 문제 해결

이 데이터 수집기에 문제가 발생하면 시도해 볼 수 있는 몇 가지 사항은 다음과 같습니다.



=== 목록

[cols="2*"]
|===
| 문제: | 다음을 시도해 보세요: 


| 401 HTTP 응답 또는 13003 ZAPI 오류 코드를 수신하고 ZAPI가 "권한이 부족합니다" 또는 "이 명령에 대한 권한이 없습니다"를 반환합니다. | 사용자 이름과 비밀번호, 사용자 권한/허가를 확인하세요. 


| "명령을 실행하지 못했습니다" 오류 | 사용자에게 장치에 대한 다음 권한이 있는지 확인합니다. • api-* • cli-date • cli-df • cli-ifconfig • cli-lun • cli-operations • cli-rdfile • cli-snap • login-http-admin • security-api-vfiler 또한 ONTAP 버전이 Data Infrastructure Insights 에서 지원되는지 확인하고 사용된 자격 증명이 장치 자격 증명과 일치하는지 확인합니다. 


| 클러스터 버전은 < 8.1입니다. | 클러스터에서 지원하는 최소 버전은 8.1입니다.  지원되는 최소 버전으로 업그레이드하세요. 


| ZAPI가 "클러스터 역할이 cluster_mgmt LIF가 아닙니다"를 반환합니다. | AU는 클러스터 관리 IP와 통신해야 합니다.  IP를 확인하고 필요한 경우 다른 IP로 변경하세요. 


| 오류: "7 모드 필터가 지원되지 않습니다" | 이 데이터 수집기를 사용하여 7모드 필터를 발견하면 이런 일이 발생할 수 있습니다.  대신 IP를 cdot filer를 가리키도록 변경하세요. 


| 재시도 후 ZAPI 명령이 실패합니다. | AU는 클러스터와 통신 문제가 있습니다.  네트워크, 포트 번호, IP 주소를 확인하세요.  사용자는 AU 머신의 명령줄에서 명령을 실행해보아야 합니다. 


| AU가 ZAPI에 연결하지 못했습니다. | IP/포트 연결을 확인하고 ZAPI 구성을 확인합니다. 


| AU가 HTTP를 통해 ZAPI에 연결하지 못했습니다. | ZAPI 포트가 일반 텍스트를 허용하는지 확인하세요.  AU가 SSL 소켓에 일반 텍스트를 보내려고 하면 통신이 실패합니다. 


| SSLException으로 인해 통신이 실패합니다. | AU는 파일러의 일반 텍스트 포트로 SSL을 보내려고 시도하고 있습니다.  ZAPI 포트가 SSL을 허용하는지 확인하거나 다른 포트를 사용하세요. 


| 추가 연결 오류: ZAPI 응답에 오류 코드 13001, "데이터베이스가 열려 있지 않습니다"가 있습니다. ZAPI 오류 코드는 60이고 응답에는 "API가 제 시간에 완료되지 않았습니다"가 포함됩니다. ZAPI 응답에는 "initialize_session()이 NULL 환경을 반환했습니다"가 포함됩니다. ZAPI 오류 코드는 14007이고 응답에는 "노드가 정상이 아닙니다"가 포함됩니다. | 네트워크, 포트 번호, IP 주소를 확인하세요.  사용자는 AU 머신의 명령줄에서 명령을 실행해보아야 합니다. 


| ZAPI에서 소켓 시간 초과 오류 발생 | 파일러 연결을 확인하고/또는 시간 초과를 늘리세요. 


| "C 모드 클러스터는 7 모드 데이터 소스에서 지원되지 않습니다" 오류 | IP를 확인하고 IP를 7모드 클러스터로 변경하세요. 


| "vFiler에 연결하지 못했습니다" 오류 | 사용자 권한을 획득하는 데 최소한 다음이 포함되어 있는지 확인하세요. api-* security-api-vfiler login-http-admin filer가 최소 ONTAPI 버전 1.7을 실행 중인지 확인하세요. 
|===
추가 정보는 다음에서 찾을 수 있습니다.link:concept_requesting_support.html["지원하다"] 페이지 또는link:reference_data_collector_support_matrix.html["데이터 수집기 지원 매트릭스"] .
