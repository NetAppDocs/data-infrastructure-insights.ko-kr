---
sidebar: sidebar 
permalink: task_config_telegraf_haproxy.html 
keywords: telegraf, installation, install, haproxy 
summary: HAProxy 데이터 수집기 구성 
---
= HAProxy 데이터 수집기
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights 이 데이터 수집기를 사용하여 HAProxy에서 메트릭을 수집합니다.



== 설치

. *관찰성 > 수집기*에서 *+데이터 수집기*를 클릭합니다.  HAProxy를 선택하세요.
+
Telegraf 에이전트가 설치된 운영 체제 또는 플랫폼을 선택하세요.

. 수집을 위한 에이전트를 아직 설치하지 않았거나 다른 운영 체제 또는 플랫폼에 대한 에이전트를 설치하려는 경우 _지침 표시_를 클릭하여 확장합니다.link:task_config_telegraf_agent.html["에이전트 설치"] 지침.
. 이 데이터 수집기와 함께 사용할 에이전트 액세스 키를 선택하세요.  *+ 에이전트 액세스 키* 버튼을 클릭하면 새로운 에이전트 액세스 키를 추가할 수 있습니다.  모범 사례: 데이터 수집기를 OS/플랫폼별로 그룹화하려는 경우에만 다른 에이전트 액세스 키를 사용하세요.
. 데이터 수집기를 구성하려면 구성 단계를 따르세요.  지침은 데이터 수집에 사용하는 운영 체제나 플랫폼의 유형에 따라 다릅니다.


image:HAProxyDCConfigLinux.png["HAProxy 구성"]



== 설정

HAProxy용 Telegraf 플러그인은 HAProxy Stats 활성화에 의존합니다.  이는 HAProxy에 내장된 구성이지만 기본적으로 활성화되어 있지 않습니다.  HAProxy를 활성화하면 브라우저에서 볼 수 있거나 모든 HAProxy 구성의 상태를 추출하기 위해 스크래핑할 수 있는 HTML 엔드포인트가 노출됩니다.



=== 호환성:

구성은 HAProxy 버전 1.9.4를 기준으로 개발되었습니다.



=== 설정:

통계를 활성화하려면 haproxy 구성 파일을 편집하고 '기본값' 섹션 뒤에 다음 줄을 추가하고, 사용자 이름/비밀번호 및/또는 haproxy URL을 사용하세요.

[listing]
----
stats enable
stats auth myuser:mypassword
stats uri  /haproxy?stats
----
다음은 통계가 활성화된 단순화된 예시 구성 파일입니다.

[listing]
----
global
  daemon
  maxconn 256

defaults
  mode http
  stats enable
  stats uri /haproxy?stats
  stats auth myuser:mypassword
  timeout connect 5000ms
  timeout client 50000ms
  timeout server 50000ms

frontend http-in
  bind *:80
  default_backend servers

frontend http-in9080
  bind *:9080
  default_backend servers_2

backend servers
  server server1 10.128.0.55:8080 check ssl verify none
  server server2 10.128.0.56:8080 check ssl verify none

backend servers_2
  server server3 10.128.0.57:8080 check ssl verify none
  server server4 10.128.0.58:8080 check ssl verify none
----
완전하고 최신의 지침은 다음을 참조하세요.link:https://cbonte.github.io/haproxy-dconv/1.8/configuration.html#4-stats%20enable["HAProxy 문서"] .



== 객체 및 카운터

다음 객체와 카운터가 수집됩니다.

[cols="<.<,<.<,<.<,<.<"]
|===
| 물체: | 식별자: | 속성: | 데이터 포인트: 


| HAProxy 프런트엔드 | 네임스페이스 주소 프록시 | 노드 IP 노드 이름 프록시 ID 모드 프로세스 ID 세션 속도 제한 서버 ID 세션 제한 상태 | 바이트 입력 바이트 출력 캐시 적중 캐시 조회 압축 우회된 바이트 압축 바이트 입력 압축 바이트 출력 압축 응답 연결 속도 연결 속도 최대 연결 수 연결 규칙에 의해 거부된 총 요청 수 보안 문제로 인해 거부된 요청 수 보안 문제로 인해 거부된 응답 수 세션 규칙에 의해 거부된 요청 수 요청 오류 응답 1xx 응답 2xx 응답 3xx 응답 4xx 응답 5xx 응답 기타 가로채기된 요청 수 세션 속도 세션 속도 최대 요청 속도 요청 속도 최대 요청 수 총 세션 수 세션 수 최대 세션 수 총 요청 수 다시 쓰기 


| HAProxy 서버 | 네임스페이스 주소 프록시 서버 | 노드 IP 노드 이름 확인 완료 시간 확인 하강 구성 확인 상태 값 확인 상승 구성 확인 상태 프록시 ID 마지막 변경 시간 마지막 세션 시간 모드 프로세스 ID 서버 ID 상태 가중치 | 활성 서버 백업 서버 바이트 입력 바이트 출력 체크 다운 체크 실패 클라이언트 중단 연결 연결 평균 시간 다운타임 총 거부된 응답 연결 오류 응답 오류 응답 1xx 응답 2xx 응답 3xx 응답 4xx 응답 5xx 응답 선택된 다른 서버 총 대기열 현재 대기열 최대 대기열 평균 시간 초당 세션 초당 세션 최대 연결 재사용 응답 시간 평균 세션 세션 최대 서버 전송 중단 세션 총 세션 총 시간 평균 요청 재전송 요청 재시도 요청 다시 쓰기 


| HAProxy 백엔드 | 네임스페이스 주소 프록시 | 노드 IP 노드 이름 프록시 ID 마지막 변경 시간 마지막 세션 시간 모드 프로세스 ID 서버 ID 세션 제한 상태 가중치 | 활성 서버 백업 서버 바이트 입력 바이트 출력 캐시 적중 캐시 조회 체크 다운 클라이언트 중단 압축 우회된 바이트 압축 바이트 입력 바이트 압축 바이트 출력 압축 응답 연결 연결 평균 시간 가동 중지 시간 보안 문제로 인해 거부된 총 요청 보안 문제로 인해 거부된 응답 연결 오류 응답 오류 응답 1xx 응답 2xx 응답 3xx 응답 4xx 응답 5xx 응답 선택된 다른 서버 총 대기열 현재 대기열 최대 대기열 평균 시간 초당 세션 초당 세션 최대 요청 총 연결 재사용 응답 시간 평균 세션 세션 최대 서버 전송 중단 세션 총 세션 총 시간 평균 요청 재전송 요청 재시도 요청 다시 쓰기 
|===


== 문제 해결

추가 정보는 다음에서 찾을 수 있습니다.link:concept_requesting_support.html["지원하다"] 페이지.
