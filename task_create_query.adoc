---
sidebar: sidebar 
permalink: task_create_query.html 
summary: 쿼리를 사용하면 관심 있는 자산과 지표를 빠르고 쉽게 파악할 수 있습니다. 
keywords: query, queries 
---
= 쿼리 생성
:hardbreaks:
:allow-uri-read: 


[role="lead"]
쿼리를 사용하면 세입자의 자산을 세부적으로 검색하여 원하는 데이터를 필터링하고 결과를 원하는 대로 정렬할 수 있습니다.

예를 들어, _볼륨_에 대한 쿼리를 만들고, 선택한 볼륨과 연관된 특정 _스토리지_를 찾는 필터를 추가하고, 선택한 스토리지에서 "Tier 1"과 같은 특정 _주석_을 찾는 또 다른 필터를 추가하고, 마지막으로 _IOPS - 읽기(IO/초)_가 25보다 큰 모든 스토리지를 찾는 또 다른 필터를 추가할 수 있습니다.  결과가 표시되면 쿼리와 관련된 정보 열을 오름차순이나 내림차순으로 정렬할 수 있습니다.

참고: 자산을 수집하는 새로운 데이터 수집기가 추가되거나 주석이나 애플리케이션 할당이 이루어지는 경우, 쿼리가 인덱싱된 후에만 해당 새로운 자산, 주석 또는 애플리케이션을 쿼리할 수 있습니다.  인덱싱은 정기적으로 예약된 간격으로 또는 주석 규칙 실행과 같은 특정 이벤트 중에 수행됩니다.

.쿼리를 만드는 것은 매우 간단합니다.
. *쿼리 > *+새 쿼리*로 이동합니다.
. '선택...' 목록에서 쿼리하려는 개체 유형을 선택합니다.  목록을 스크롤하거나 직접 입력하여 원하는 내용을 더 빨리 찾을 수 있습니다.


.스크롤 목록:
image:QueryDrop-DownList.png["쿼리 드롭다운"]

.입력하여 검색:
image:QueryPageFilter.png["찾으려고 타이핑하다"]

*필터 기준* 필드에서 *+* 버튼을 클릭하면 필터를 추가하여 쿼리를 더욱 좁힐 수 있습니다.  객체나 속성별로 행을 그룹화합니다.  통합 데이터(Kubernetes, ONTAP Advanced Metrics 등)를 사용할 때 원하는 경우 여러 속성별로 그룹화할 수 있습니다.

image:QueryFilterExample.png["쿼리 필터링 및 그룹화"]

쿼리 결과 목록에는 검색한 개체 유형에 따라 여러 개의 기본 열이 표시됩니다.  열을 추가, 제거 또는 변경하려면 표 오른쪽에 있는 기어 아이콘을 클릭하세요.  사용 가능한 열은 자산/지표 유형에 따라 달라집니다.

image:QuerySelectColumns.png["열 선택"]



== 실제로 확인해 보세요

link:https://media.netapp.com/video-detail/d0530e0b-a222-52e7-92b1-dbeeee41b712/explore-and-analyze-with-queries-in-data-infrastructure-insights["Data Infrastructure Insights 에서 쿼리를 사용하여 탐색 및 분석(비디오)"]



== 집계, 단위, 조건부 서식 선택



=== 집계 및 단위

"값" 열의 경우, 표시되는 값을 집계하는 방법과 해당 값이 표시되는 단위를 선택하여 쿼리 결과를 더욱 세분화할 수 있습니다.  이러한 옵션은 열의 상단 모서리에 있는 "세 개의 점" 메뉴를 선택하면 찾을 수 있습니다.

image:Query_Page_Aggregation_etc.png["집계, 조건부 서식, 단위 표시 및 열 이름 바꾸기를 보여주는 쿼리 페이지 결과"]



==== 단위

값을 표시할 단위를 선택할 수 있습니다.  예를 들어, 선택한 열에 원시 용량이 표시되고 값이 GiB 단위로 표시되지만 TiB로 표시하고 싶은 경우 단위 표시 드롭다운에서 TiB를 선택하면 됩니다.



==== 집합

마찬가지로, 표시된 값이 기본 데이터에서 "평균"으로 집계되었지만 모든 값의 합계를 표시하려는 경우, _그룹화 기준_ 드롭다운(그룹화된 값에 합계를 표시하려는 경우) 또는 _시간 집계 기준_ 드롭다운(행 값에 기본 데이터의 합계를 표시하려는 경우)에서 "합계"를 선택합니다.

그룹화된 데이터 포인트를 _평균, 최대값, 최소값 또는 합계_를 기준으로 집계할 수 있습니다.

개별 행 데이터를 _평균, 마지막으로 획득한 데이터 포인트, 최대값, 최소값 또는 합계_를 기준으로 집계할 수 있습니다.



==== 조건부 서식

조건부 서식을 사용하면 쿼리 결과 목록에서 경고 수준 및 위험 수준 임계값을 강조 표시하여 이상치와 예외적인 데이터 포인트를 즉시 파악할 수 있습니다.

image:Query_Page_Conditional_Formatting.png["쿼리 페이지의 조건부 서식"]

조건부 서식은 각 열에 대해 별도로 설정됩니다.  예를 들어, 용량 열에 대해 한 세트의 임계값을 선택하고, 처리량 열에 대해 다른 세트의 임계값을 선택할 수 있습니다.



==== 열 이름 바꾸기

열 이름을 바꾸면 쿼리 결과 목록에 표시되는 이름이 변경됩니다.  쿼리 목록을 .CSV로 내보내는 경우 새 열 이름도 결과 파일에 표시됩니다.



=== 구하다

원하는 결과를 표시하도록 쿼리를 구성한 후 *저장* 버튼을 클릭하면 나중에 사용할 수 있도록 쿼리를 저장할 수 있습니다.  의미 있고 독특한 이름을 지어보세요.



== 필터링에 대한 추가 정보



=== 와일드카드와 표현식

쿼리나 대시보드 위젯에서 텍스트나 목록 값을 필터링할 때 입력을 시작하면 현재 텍스트를 기반으로 *와일드카드 필터*를 만들 수 있는 옵션이 제공됩니다.  이 옵션을 선택하면 와일드카드 표현식과 일치하는 모든 결과가 반환됩니다.  NOT 또는 OR을 사용하여 *표현식*을 만들 수도 있고, "없음" 옵션을 선택하여 필드에서 null 값을 필터링할 수도 있습니다.

image:Type-Ahead-Example-ingest.png["와일드카드 필터"]

와일드카드나 표현식(예: NOT, OR, "없음" 등)을 기반으로 하는 필터는 필터 필드에 진한 파란색으로 표시됩니다.  목록에서 직접 선택한 항목은 밝은 파란색으로 표시됩니다.

image:Type-Ahead-Example-Wildcard-DirectSelect.png["와일드카드 필터 결과"]

와일드카드 및 표현식 필터링은 텍스트나 목록에서는 작동하지만 숫자, 날짜 또는 부울에서는 작동하지 않습니다.



=== 필터 정제

다음을 사용하여 필터를 구체화할 수 있습니다.

|===


| 필터 | 그것이 하는 일 | 예 | 결과 


| * (별표) | 모든 것을 검색할 수 있습니다 | 볼*렐 | "vol"로 시작하고 "rhel"로 끝나는 모든 리소스를 반환합니다. 


| ?  (물음표) | 특정 수의 문자를 검색할 수 있습니다 | BOS-PRD??-S12 | BOS-PRD**__12__**-S12, BOS-PRD**__23__**-S12 등을 반환합니다. 


| 또는 | 여러 엔터티를 지정할 수 있습니다. | FAS2240 또는 CX600 또는 FAS3270 | FAS2440, CX600 또는 FAS3270 중 하나를 반환합니다. 


| 아니다 | 검색 결과에서 텍스트를 제외할 수 있습니다. | EMC가 아닙니다* | "EMC"로 시작하지 않는 모든 항목을 반환합니다. 


| _없음_ | 모든 필드에서 NULL 값을 검색합니다. | _없음_ | 대상 필드가 비어 있는 결과를 반환합니다. 


| 아니다 * | _텍스트 전용_ 필드에서 NULL 값 검색 | 아니다 * | 대상 필드가 비어 있는 결과를 반환합니다. 
|===
필터 문자열을 큰따옴표로 묶으면 Insight는 첫 번째 따옴표와 마지막 따옴표 사이의 모든 내용을 정확한 일치로 처리합니다.  따옴표 안의 특수 문자나 연산자는 리터럴로 처리됩니다.  예를 들어, "*"로 필터링하면 별표 문자가 반환됩니다. 이 경우 별표는 와일드카드로 처리되지 않습니다.  OR 및 NOT 연산자도 큰따옴표로 묶으면 문자열로 처리됩니다.



=== 부울 값 필터링

부울 값을 필터링할 때 필터링할 다음과 같은 선택 사항이 제공될 수 있습니다.

* *모든*: "예", "아니요"로 설정된 결과 또는 전혀 설정되지 않은 결과를 포함하여 _모든_ 결과가 반환됩니다.
* *예*: "예" 결과만 반환합니다. DII는 대부분 표에서 체크 표시로 "예"를 표시합니다. 값은 "참", "켜짐" 등으로 설정할 수 있으며, DII는 이러한 모든 값을 "예"로 처리합니다.
* *아니요*: "아니요" 결과만 반환합니다. DII는 대부분 표에서 "아니요"를 "X"로 표시합니다. 값은 "False", "Off" 등으로 설정될 수 있으며, DII는 이러한 모든 값을 "No"로 처리합니다.
* *없음*: 값이 전혀 설정되지 않은 결과만 반환합니다. "Null" 값이라고도 합니다.




== 이제 쿼리 결과가 나왔으니 어떻게 해야 하나요?

쿼리는 주석을 추가하거나 자산에 애플리케이션을 할당하는 간단한 장소를 제공합니다.  인벤토리 자산(디스크, 스토리지 등)에만 애플리케이션이나 주석을 할당할 수 있습니다.  통합 메트릭은 주석이나 애플리케이션 할당을 수행할 수 없습니다.

질의 결과로 생성된 자산에 주석이나 애플리케이션을 할당하려면 결과 표의 왼쪽에 있는 체크 박스 열을 사용하여 자산을 선택한 다음 오른쪽에 있는 *대량 작업* 버튼을 클릭하세요.  선택한 자산에 적용할 원하는 작업을 선택하세요.

image:QueryVolumeBulkActions.png["대량 작업 쿼리 예제"]



== 주석 규칙에는 쿼리가 필요합니다.

구성 중이라면link:task_create_annotation_rules.html["주석 규칙"] 각 규칙에는 작업할 기본 쿼리가 있어야 합니다.  하지만 위에서 보셨듯이, 질의는 필요에 따라 광범위하거나 좁게 만들 수 있습니다.
